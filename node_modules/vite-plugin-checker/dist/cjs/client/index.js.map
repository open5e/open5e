{"version":3,"sources":["../../../src/client/index.ts","../../../../../node_modules/.pnpm/tsup@6.2.2_typescript@4.5.5/node_modules/tsup/assets/cjs_shims.js"],"sourcesContent":["import fs from 'fs'\nimport { createRequire } from 'module'\nconst _require = createRequire(import.meta.url)\n\nexport const RUNTIME_CLIENT_RUNTIME_PATH = '/@vite-plugin-checker-runtime'\nexport const RUNTIME_CLIENT_ENTRY_PATH = '/@vite-plugin-checker-runtime-entry'\n\nexport const composePreambleCode = (base = '/', config: Record<string, any>) => `\nimport { inject } from \"${base}${RUNTIME_CLIENT_RUNTIME_PATH.slice(1)}\";\ninject({\n  overlayConfig: ${JSON.stringify(config)},\n  base: \"${base}\",\n});\n`\n\n// #region\n// NOTE: sync modification with packages/runtime/src/ws.js\nexport const WS_CHECKER_ERROR_EVENT = 'vite-plugin-checker:error'\nexport const WS_CHECKER_RECONNECT_EVENT = 'vite-plugin-checker:reconnect'\n// #endregion\n\nexport const runtimeSourceFilePath = import.meta.url.endsWith('.ts')\n  ? // for development only, maybe should use NODE_ENV to distinguish\n    _require.resolve('../@runtime/main.js')\n  : _require.resolve('../../@runtime/main.js')\nexport const runtimeCode = `${fs.readFileSync(runtimeSourceFilePath, 'utf-8')};`\n","// Shim globals in cjs bundle\n// There's a weird bug that esbuild will always inject importMetaUrl\n// if we export it as `const importMetaUrl = ... __filename ...`\n// But using a function will not cause this issue\n\nconst getImportMetaUrl = () =>\n  typeof document === 'undefined'\n    ? new URL('file:' + __filename).href\n    : (document.currentScript && document.currentScript.src) ||\n      new URL('main.js', document.baseURI).href\n\nexport const importMetaUrl = /* @__PURE__ */ getImportMetaUrl()\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;ACKA,IAAM,mBAAmB,MACvB,OAAO,aAAa,cAChB,IAAI,IAAI,UAAU,UAAU,EAAE,OAC7B,SAAS,iBAAiB,SAAS,cAAc,OAClD,IAAI,IAAI,WAAW,SAAS,OAAO,EAAE;AAEpC,IAAM,gBAAgC,iCAAiB;ADX9D,gBAAe;AACf,oBAA8B;AAC9B,MAAM,eAAW,6BAAc,aAAe;AAEvC,MAAM,8BAA8B;AACpC,MAAM,4BAA4B;AAElC,MAAM,sBAAsB,CAAC,OAAO,KAAK,WAAgC;AAAA,0BACtD,OAAO,4BAA4B,MAAM,CAAC;AAAA;AAAA,mBAEjD,KAAK,UAAU,MAAM;AAAA,WAC7B;AAAA;AAAA;AAMJ,MAAM,yBAAyB;AAC/B,MAAM,6BAA6B;AAGnC,MAAM,wBAAwB,cAAgB,SAAS,KAAK,IAE/D,SAAS,QAAQ,qBAAqB,IACtC,SAAS,QAAQ,wBAAwB;AACtC,MAAM,cAAc,GAAG,UAAAA,QAAG,aAAa,uBAAuB,OAAO;","names":["fs"]}